const throttle=(b,c)=>{let d,e,a;return function(){const f=this,g=arguments;d?(clearTimeout(e),e=setTimeout(function(){Date.now()-a>=c&&(b.apply(f,g),a=Date.now())},Math.max(c-(Date.now()-a),0))):(b.apply(f,g),a=Date.now(),d=!0)}},delayTime=420;window.addEventListener('DOMContentLoaded',b=>{const a=document.querySelector('.header');if(a){const c=window.getComputedStyle(a,null).getPropertyValue('height');document.documentElement.style.setProperty('--header-height',c);let b=0;window.addEventListener('scroll',throttle(()=>{window.scrollY>b?a.classList.add('hide'):a.classList.remove('hide'),b=window.scrollY},delayTime))}},{once:!0}),window.addEventListener("DOMContentLoaded",j=>{const b=document.querySelector('.nav-toggle'),d=document.createElement('div');d.className='nav-toggle-inner',b.appendChild(d);for(let a=0;a<3;a++){const b=document.createElement('span');d.appendChild(b)}const c=document.getElementById('nav-toggle'),a=document.querySelector('.header'),e=document.querySelector('.nav-curtain');c.addEventListener('change',c=>{c.target.checked?(a.classList.add('open'),b.classList.add('open'),a.classList.remove('fade'),e.style='display: block'):(a.classList.remove('open'),b.classList.remove('open'),a.classList.add('fade'))}),e.addEventListener('animationend',a=>{c.checked||a.target.removeAttribute('style')}),window.addEventListener('scroll',throttle(function(){i()},delayTime));const g=window.getComputedStyle(document.documentElement,null).getPropertyValue('--max-width');let h=window.matchMedia(`(max-width: ${g})`);h.addListener(a=>{a.matches||f(!0)});function i(){const a=document.getElementById('search-input');if(a&&a===document.activeElement)return;f()}function f(d){c.checked&&(c.checked=!1,a.classList.remove('open'),b.classList.remove('open'),d?e.removeAttribute("style"):a.classList.add('fade'))}},{once:!0}),window.addEventListener("DOMContentLoaded",b=>{const a=document.getElementById('back-to-top');a!==null&&window.addEventListener('scroll',throttle(function(){window.scrollY>100?a.classList.add('show'):a.classList.remove('show')},delayTime))},{once:!0}),window.addEventListener("DOMContentLoaded",d=>{const a='复制',c='已复制';document.querySelectorAll('.post-body > pre').forEach(a=>{let b=document.createElement('div');a.parentNode.replaceChild(b,a),b.appendChild(a)});function b(b){const d=document.querySelectorAll('table.lntable, .highlight > pre, .post-body > div > pre');d.forEach(e=>{var f;e.parentNode.style.position='relative';const d=document.createElement('button');d.className='copy-button',d.type='button',d.innerText=a,e.classList.contains('lntable')?(f=e.querySelectorAll('.lntd')[1]):(f=e.querySelector('code')),d.addEventListener('click',()=>{b.writeText(f.innerText).then(()=>{d.blur(),d.innerText=c,setTimeout(()=>{d.innerText=a},1e3)}).catch(a=>{d.innerText='Error',console.error(a)})}),e.appendChild(d),e.parentNode.addEventListener('mouseover',()=>{d.style='visibility: visible; opacity: 1'}),e.parentNode.addEventListener('mouseout',()=>{d.style='visibility: hidden; opacity: 0'})})}if(navigator&&navigator.clipboard)b(navigator.clipboard);else{const a=document.createElement('script');a.src='https://cdn.jsdelivr.net/npm/clipboard-polyfill@2.8.6/dist/clipboard-polyfill.min.js',a.defer=!0,a.onload=function(){b(clipboard)},document.head.appendChild(a)}},{once:!0}),window.addEventListener("DOMContentLoaded",d=>{let b=null;const a=instantsearch({appId:"QAZQ4L0054",apiKey:"a974ded802ad57041ada6b0457c97e18",indexName:"blog"});a.addWidget({init:function(a){const b=a.helper,c=document.getElementById("search-input");c.addEventListener("input",function(a){b.setQuery(a.currentTarget.value).search()})}}),a.addWidget({render:function(h){let e=h.state.query;if(!e)return;const f=h.results.hits;let d=document.querySelector(".main-inner")||document.querySelector("main.home"),i=[];while(d.firstChild)i.push(d.firstChild),d.removeChild(d.firstChild);b||(b=i);let a=document.createElement("h1");a.id="search-results",a.className="list-title",f.length==0?a.textContent="没有找到关于「{}」的结果".replace("{}",e):f.length==1?a.textContent="找到 1 条关于「{}」的结果".replace("{}",e):a.textContent="找到 13579 条关于「{}」的结果".replace("{}",e).replace("13579",f.length),d.appendChild(a),document.title=a.textContent;let j=document.getElementById("search-result");for(let b of f){let a=j.content.cloneNode(!0);a.querySelector(".summary-title-link").href=a.querySelector(".read-more-link").href=b.url,a.querySelector(".summary-title-link").textContent=b.title,a.querySelector(".summary").textContent=c(b.summary,70),d.appendChild(a)}a.scrollIntoView(!0);let g=document.querySelector('.nav-toggle');g&&g.classList.contains("open")&&document.getElementById(g.getAttribute("for")).click()}}),a.start();function c(d,e){let a,b="",c=0,f=/(\S+)(\s*)/g;while(a=f.exec(d))if(c++,c<=e)b+=a[0];else{let c=a[1][a[1].length-1],d=a[2][0];if(/[.?!"]/.test(c)||d=="\n"){b+=a[1];break}b+=a[0]}return b}},{once:!0})